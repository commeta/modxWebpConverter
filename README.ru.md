![modxWebpConverter](https://raw.githubusercontent.com/commeta/modxWebpConverter/master/screenShot.png "modxWebpConverter")

## modxWebpConverter, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ - [Webp –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è MODX Revo](https://webdevops.ru/blog/webp-converter-plugin-modx.html)
MODX Revolution –ø–ª–∞–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç webp. 

–ü–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤–∞—à–∏ JPEG/PNG-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç WebP –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –≤ HTML-–∫–æ–¥ —Å–∞–π—Ç–∞, –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebP.


---

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è** JPEG –∏ PNG –≤ WebP —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã `cwebp`.  
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∫—É MODX** ‚Äî –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –º–µ–Ω—é –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´WEBP –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä¬ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞.  
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Ñ–∞–π–ª–æ–≤ ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤ `converter.js`.  
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–µ `/webp/` —Ä—è–¥–æ–º —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º.  
- **–ù–µ–∑–∞–º–µ—Ç–Ω–∞—è –ø–æ–¥–º–µ–Ω–∞** –≤ HTML ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ `<img>` –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ `<picture>` —Å WebP-–≤–µ—Ä—Å–∏–µ–π, –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç.  
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π** ‚Äî –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ª—é–±—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —à–∞–±–ª–æ–Ω–æ–≤, —á–∞–Ω–∫–æ–≤, —Å–Ω–∏–ø–ø–µ—Ç–æ–≤ –∏ —Ç. –¥.) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è –Ω–æ–≤—ã—Ö/–∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- MODX Revolution ‚â• 2.7  
- PHP ‚â• 7.x  
- –£—Ç–∏–ª–∏—Ç–∞ [cwebp](https://developers.google.com/speed/webp/docs/precompiled) –¥–ª—è –≤–∞—à–µ–π –û–° (Windows, Linux, macOS, FreeBSD, Solaris)  
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ —Å–∞–π—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏ `/webp/`

---



## –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

1. –°–æ–∑–¥–∞–µ–º –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥ /connectors/converter/ –∏ –∑–∞–ª–∏–≤–∞–µ–º —Ç—É–¥–∞ —Ñ–∞–π–ª—ã:
* converter.php - –°–µ—Ä–≤–µ—Ä–Ω–æ–µ api
* converter.js - –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
* Binaries - –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ —É—Ç–∏–ª–∏—Ç—ã cwebp, —Ç–∞–º –µ—Å—Ç—å –¥–ª—è linux, windows, macos, freebsd, solaris.

–ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ –≤–∑—è—Ç—ã —Å https://github.com/rosell-dk/webp-convert –∏ https://developers.google.com/speed/webp/docs/precompiled

[–£—Å—Ç–∞–Ω–æ–≤–∫–∞ & –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ —É—Ç–∏–ª–∏—Ç—ã CWEBP](https://github.com/commeta/modxWebpConverter/blob/master/Binaries/README.md)

2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–ª–∞–≥–∏–Ω –≤ MODX**

   * –í –∞–¥–º–∏–Ω–∫–µ –æ—Ç–∫—Ä–æ–π—Ç–µ ¬´–≠–ª–µ–º–µ–Ω—Ç—ã ‚Üí –ü–ª–∞–≥–∏–Ω—ã ‚Üí –ù–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω¬ª.
   * –ù–∞–∑–æ–≤–∏—Ç–µ –µ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `modx_plugin_webp_converter`.
   * –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `modx_plugin_webp_converter.php` (—Å–º. [–∏—Å—Ö–æ–¥–Ω–∏–∫](modx_plugin_webp_converter.php)).
   * –ü—Ä–∏–≤—è–∂–∏—Ç–µ –ø–ª–∞–≥–∏–Ω –∫ —Å–æ–±—ã—Ç–∏—è–º:

     ```
     OnManagerPageBeforeRender
     OnWebPagePrerender
     OnSiteRefresh
     OnTemplateSave
     OnChunkSave
     OnPluginSave
     OnSnippetSave
     OnTemplateVarSave
     OnDocFormSave
     ```
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏**
   –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º –º–µ–Ω—é MODX –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è ¬´WEBP –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä¬ª. –ù–∞–∂–º–∏—Ç–µ ‚Äî –Ω–∞—á–Ω—ë—Ç—Å—è —Ñ–æ–Ω–æ–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –∫–æ–Ω–≤–µ—Ä—Å–∏—è ‚Üí –∑–∞–º–µ–Ω–∞.



---

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞

* **–ß–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤**
  –û—Ç–∫—Ä–æ–π—Ç–µ `converter.js` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

  ```js
  const concurent_tasks   = 3; // —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤–∫–ª–∞–¥–æ–∫
  const max_count_threads = 4; // —á–∏—Å–ª–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞ –≤–∫–ª–∞–¥–∫—É
  ```
* **–ü—É—Ç—å –∫ `cwebp`**
  –ï—Å–ª–∏ –±–∏–Ω–∞—Ä–Ω–∏–∫ –Ω–µ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ø–∞–ø–∫–µ, —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –≤ `converter.php`:

  ```php
  define('WEBP_CONVERTER_BIN', '/connectors/converter/Binaries/linux/cwebp');
  ```

---

## –†—É–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –Ω–∞ MODX Revolution 2.7.3-pl!
* Windows 7 64bit XAMPP PHP 7.4.9, 
* linux Ubuntu 20.04 64bit LAMP PHP 7.4.3, 
* linux CentOS 7 LANMP PHP 5.4.45

–í–∑—è–ª —Å–æ–ª—è–Ω–∫—É jpg & png, 24382 —Ñ–∞–π–ª–æ–≤, 3385MB.

–í—Å–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ –ø–∏–∫–µ: –Ω–∞ win 6 580 936b, –Ω–∞ lin 3 816 368b.
–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∑–∞–Ω—è–ª–æ: 191ms SSD, 3123ms HDD.
–°–∂–∞—Ç–∏–µ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Ç 28ms –¥–æ 5800ms.
–†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –æ–±—ä–µ–º –ø–µ—Ä–µ–∂–∞—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤: 1005MB, –ø–æ—Ç–µ—Ä–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–µ –∑–∞–º–µ—Ç–∏–ª.

–û—Ç–∫—Ä—ã–ª –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ 12 –≤–∫–ª–∞–¥–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –ø–æ—à–ª–∞ –≤ 12 –ø–æ—Ç–æ–∫–æ–≤, —É –º–µ–Ω—è –Ω–∞ Ryzen 5 2600X Six-Core –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∑–∞–Ω—è–ª–∞ –æ–∫–æ–ª–æ 45 –º–∏–Ω—É—Ç.

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. **–ú–æ–∂–Ω–æ –ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?**
   –î–∞ ‚Äî –ø–ª–∞–≥–∏–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∏–ª–∏ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ.
2. **–ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º?**
   –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç–µ –ø–∞–ø–∫—É `/webp/` ‚Äî HTML –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ë—Ç—Å—è –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º –ø—É—Ç—è–º.
3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ GIF –∏–ª–∏ SVG?**
   –ù–µ—Ç, —Ç–æ–ª—å–∫–æ JPEG –∏ PNG.

---
